# Shoes NGO (Ultra Low Cost)

## Setup
1. `cp .env.example .env` 並填入 Supabase 與 Admin Token
2. 放入 YOLO 權重：`inference/models/stage1_sneaker_cls.pt`, `stage2_defects_cls.pt`
3. Supabase 執行 `infra/supabase.sql`

## Run (local)
```bash
python -m venv .venv && source .venv/bin/activate
pip install -r inference/requirements.txt
export $(cat .env | xargs)
uvicorn inference.app:app --host 0.0.0.0 --port 7860
```

## Colab
• `!git clone https://github.com/<you>/shoes-ngo.git`
• 安裝 `pip install -r inference/requirements.txt`
• 設 `os.environ[...]` 或寫入 `.env`
• 啟 `uvicorn` + `cloudflared` 暴露 API

## Admin 冷啟動
1. 開 `frontend-min/admin.html` → Start Cold Start
2. 等 CI / Colab 跑完成 `pending_review`
3. Approve Run → 寫入 `model_registry`

## CI
• `auto-train.yml`: 每日檢查門檻，自動訓練但僅標記 `pending_review`
• `manual-train.yml`: 手動指定 `run_id` 訓練（需 environment Approve）
• Repo Secrets: `SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`